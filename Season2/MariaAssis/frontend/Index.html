<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MemÃ³ria ImutÃ¡vel - Hub</title>
  <link rel="stylesheet" href="index.css">
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script defer src="app.js"></script>

  <!-- Bloqueio de acesso se nÃ£o estiver logado -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      if (localStorage.getItem("logged") !== "true") {
        alert("VocÃª precisa fazer login para acessar o Memorial ImutÃ¡vel!");
        window.location.href = "login.html";
      }
    });
  </script>
</head>


<body>
  <button id="logoutBtn" class="logout-btn">Sair</button>

  <div class="container hub-principal">

    <header class="header-logo">
      <h1>MemÃ³ria ImutÃ¡vel</h1>
      <p class="subtitulo">Preservando suas lembranÃ§as com seguranÃ§a e afeto.</p>
    </header>

    <!-- ConexÃ£o MetaMask -->
    <section class="card-secao wallet-section">
      <h2>ğŸ”— ConexÃ£o</h2>
      <button id="connectWalletBtn" class="botao-primario">Conectar MetaMask</button>
      <p id="walletStatus" class="status-texto">Carteira nÃ£o conectada</p>
    </section>

    <hr class="separador">

    <!-- Upload de MemÃ³rias -->
    <section class="card-secao upload-section">
      <h2>ğŸ–¼ï¸ Registrar MemÃ³ria Visual</h2>

      <div class="input-group">
        <label for="fileInput" class="upload-label">Selecione seu PDF ou Imagem:</label>
        <input type="file" id="fileInput" accept="image/*,.pdf,.txt,.doc,.docx" class="input-file-custom">
      </div>

      <div class="input-group full-width">
        <label for="customName">Nome do Arquivo (Opcional):</label>
        <input type="text" id="customName" placeholder="Ex: Foto de Natal 2023">
      </div>

      <div class="context-grid">
        <div class="input-group">
          <label for="anoFoto">Ano da MemÃ³ria:</label>
          <input type="number" id="anoFoto" placeholder="Ex: 2004">
        </div>
        <div class="input-group">
          <label for="dataFoto">Data EspecÃ­fica:</label>
          <input type="date" id="dataFoto">
        </div>
      </div>

      <div class="input-group full-width">
        <label for="contextoFoto">Contexto (DescriÃ§Ã£o da Foto/Documento):</label>
        <textarea id="contextoFoto" placeholder="Ex: Foto da famÃ­lia na reuniÃ£o de Natal" rows="3"></textarea>
      </div>

      <button id="sendBtn" class="botao-acao full-width">ğŸ“¤ Enviar e Registrar Arquivo</button>
      <progress id="progressBar" value="0" max="100"></progress>
      <p id="result" class="result-message"></p>
    </section>

    <hr class="separador">

    <!-- DiÃ¡rio / Carta -->
    <section class="card-secao diario-section">
      <h2>ğŸ“ DiÃ¡rio Pessoal e Cartas</h2>

      <div class="editor-container">
        <div class="editor-toolbar">
          <button class="toolbar-btn">B</button>
          <button class="toolbar-btn">I</button>
          <button class="toolbar-btn">ğŸ–¼ï¸</button>
        </div>

        <div class="input-group full-width">
          <label for="diarioTitulo">TÃ­tulo da Carta (Opcional):</label>
          <input type="text" id="diarioTitulo" placeholder="Ex: ReflexÃµes do Primeiro Semestre">
        </div>

        <div class="input-group">
          <label>Data da Carta:</label>
          <input type="date" id="dataCarta">
        </div>

        <textarea id="cartaTexto" class="text-editor" placeholder="Escreva sua carta, diÃ¡rio ou lembranÃ§a aqui..."></textarea>
      </div>

      <button id="sendCartaBtn" class="botao-acao full-width">âœ‰ï¸ Salvar DiÃ¡rio/Carta</button>
    </section>

    <hr class="separador">

    <!-- BotÃ£o HistÃ³rico -->
    <section class="card-secao history-section">
      <button id="openHistoryBtn" class="botao-secundario full-width">ğŸ“œ Ver HistÃ³rico de MemÃ³rias</button>
    </section>

  </div>

  <!-- Script para redirecionar ao HistÃ³rico -->
  <script>
    const historyBtn = document.getElementById("openHistoryBtn");
    if (historyBtn) {
      historyBtn.addEventListener("click", () => {
        window.location.href = "historico.html";
      });
    }
  </script>
</body>
</html>
